var wpDataTablesHighchart=function(){var t={container:"#wdtHighChartContainer",columnIndexes:[],numberFormat:1,connectedWPDataTable:null,renderCallback:null,chart:null,setContainer:function(t){this.container=t,this.options.chart.renderTo=t.replace("#","")},pieChartTypes:["highcharts_pie_chart","highcharts_pie_with_gradient_chart","highcharts_3d_pie_chart","highcharts_donut_chart","highcharts_3d_donut_chart"],getContainer:function(){return this.container},setWidth:function(t){isNaN(t)||null==t||0==t?delete this.options.chart.width:this.options.chart.width=parseInt(t)},getWidth:function(){return this.options.chart.width},setHeight:function(t){this.options.chart.height=parseInt(t)},getHeight:function(){return this.options.chart.height},setRenderCallback:function(t){this.renderCallback=t},options:{chart:{type:"line",height:400},title:{text:"Chart title",x:-20},xAxis:{},yAxis:{title:{text:""},plotLines:[{value:0,width:1,color:"#808080"}]},legend:{layout:"horizontal",align:"right"},series:[],plotOptions:{}},setOptions:function(t){for(var e in t)this.options[e]=t[e]},getOptions:function(){return this.options},render:function(){null!==this.renderCallback&&this.renderCallback(this),this.chart=new Highcharts.Chart(this.options)},setType:function(t){switch(t){case"highcharts_basic_area_chart":this.options.chart.type="area";break;case"highcharts_stacked_area_chart":this.options.chart.type="area",this.options.plotOptions={area:{stacking:"normal"}};break;case"highcharts_basic_bar_chart":this.options.chart.type="bar";break;case"highcharts_scatter_plot":this.options.chart.type="scatter";break;case"highcharts_stacked_bar_chart":this.options.chart.type="bar",this.options.plotOptions={series:{stacking:"normal"}};break;case"highcharts_basic_column_chart":this.options.chart.type="column";break;case"highcharts_3d_column_chart":this.options.chart.type="column",this.options.chart.margin=75,this.options.chart.options3d={enabled:!0,alpha:15,beta:15,viewDistance:25,depth:40},this.options.plotOptions={column:{depth:25}};break;case"highcharts_stacked_column_chart":this.options.chart.type="column",this.options.plotOptions={column:{stacking:"normal"}};break;case"highcharts_pie_chart":this.options.chart.type="pie",this.options.plotOptions={pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},this.options.tooltip={pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"};break;case"highcharts_3d_pie_chart":this.options.chart.type="pie",this.options.plotOptions={pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}},depth:35}},this.options.tooltip={pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},this.options.chart.options3d={enabled:!0,alpha:15,beta:15,viewDistance:25,depth:40};break;case"highcharts_pie_with_gradient_chart":this.options.chart.type="pie",Highcharts.getOptions().colors=Highcharts.map(Highcharts.getOptions().colors,function(t){return{radialGradient:{cx:.5,cy:.3,r:.7},stops:[[0,t],[1,Highcharts.Color(t).brighten(-.3).get("rgb")]]}}),this.options.plotOptions={pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},this.options.tooltip={pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"};break;case"highcharts_donut_chart":this.options.chart.type="pie",this.options.plotOptions={pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},this.options.series[0].innerSize="80%",this.options.tooltip={pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"};break;case"highcharts_3d_donut_chart":this.options.chart.type="pie",this.options.chart.options3d={enabled:!0,alpha:15,beta:15,viewDistance:25,depth:40},this.options.plotOptions={pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}},depth:35}},this.options.series[0].innerSize="80%",this.options.tooltip={pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"};break;case"highcharts_gauge_chart":this.options.chart.type="gauge";break;case"highcharts_solid_gauge_chart":this.options.chart.type="gauge";break;case"highcharts_line_chart":default:this.options.chart.type="line"}},refresh:function(){this.chart.redraw()},setColumnIndexes:function(t){this.columnIndexes=t},getColumnIndexes:function(){return this.columnIndexes},setConnectedWPDataTable:function(t){this.connectedWPDataTable=t},getConnectedWPDataTable:function(){return this.connectedWPDataTable},enableFollowFiltering:function(){null!=this.connectedWPDataTable&&(this.options.plotOptions.series={animation:!1},this.numberFormat=jQuery.parseJSON(jQuery("#"+this.connectedWPDataTable.data("described-by")).val()).number_format,this.connectedWPDataTable.fnSettings().aoDrawCallback.push({sName:"chart_filter_follow",fn:function(e){t.options.xAxis.categories=[];var a=0,i=t.connectedWPDataTable._("tr",{filter:"applied"}).toArray();for(var o in t.columnIndexes){var n=[];if(t.columnIndexes.length>0&&0==o)for(var r in i)t.options.xAxis.categories.push(i[r][t.columnIndexes[o]]);else{for(var r in i){var s=i[r][t.columnIndexes[o]];-1!==t.pieChartTypes.indexOf(t.type)?1==t.numberFormat?n.push(parseFloat(wdtUnformatNumber(s,".",",",!0))):n.push(parseFloat(wdtUnformatNumber(s,",",".",!0))):1==t.numberFormat?n.push({name:t.options.xAxis.categories[r],y:parseFloat(wdtUnformatNumber(s,".",",",!0))}):n.push({name:t.options.xAxis.categories[r],y:parseFloat(wdtUnformatNumber(s,",",".",!0))})}t.options.series[a].data=n,a++}}null!==t.chart&&t.chart.destroy(),null!==t.renderCallback&&t.renderCallback(t),t.chart=new Highcharts.Chart(t.options)}}))}};return t};